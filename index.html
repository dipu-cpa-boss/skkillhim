<html><head>
    <title>URL Shortener</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
  </head>

  <body>
    <div class="container">
      <center>
        <h1><a href="index.php" style="text-decoration: none; color: #009933; font-family: Arial, sans-serif;">URL Shortener</a></h1>
      </center>
      <form id="urlForm">
        <label for="longUrlInput">Long URL:</label>
        <input type="text" id="longUrlInput" placeholder="Enter a long URL" required>
        <center><button type="submit">Shorten</button></center>
      </form>
      <div id="shortUrlContainer" class="hidden">
        <label for="shortUrlInput">Short URL:</label>
        <div class="short-url-container">
          <input type="text" id="shortUrlInput" readonly>
          <button id="copyButton">Copy</button>
        </div>
      </div>
      <div id="errorContainer" class="hidden">
        <center>
          <p id="errorMessage" style="color: red;"></p>
        </center>
      </div>
      <div class="social-links">
        <a href="https://www.facebook.com/" target="_blank"><i class="fab fa-facebook"></i></a>
        <a href="https://api.whatsapp.com/send?phone=88&text=Hello,%20I'm%20interested%20on%20your%20services." target="_blank"><i class="fab fa-whatsapp"></i></a>
      </div>
      <center>
        <
      </center>
    </div>

    <script>
      document.getElementById('urlForm').addEventListener('submit', shortenUrl);
      document.getElementById('copyButton').addEventListener('click', copyUrl);

      var allowedKeywords = [
        "164761", //Kotubul
        "193358",
        "197127",
        "197138", //soyon
        "196804",
        "173743", // shohid
        "192083",
        "188241", // biddut
        "215321",
        "218427",
        "174216", // sanjoy
        "ensg",
        "147255", //Alok
        "192561", //akash vai
        "213804", //Shovon
        //"212138", // Sabuz
        //"195164",
        "212131", //moly
        "217421",
        //"182650",
        "189230", //Ahsan Habib
        "192356",
        "182882", //jahirul vai
        "182847",
        "176457",
        "164316",
        "164855",
        "192517",
        "196394", //imran        
        "197115",
        "190964", //Asad
        "195790",
        "183082", //rishad v imran
        "193742",
        "165078", // rabbi
        "lE4HZjeECe15Tz",
        "153086",
        "159713", // shamim
        "191055", //sajal
        "149394",
        "214499", //Robiul
        "182650", //Robiul 2
        "196804", // mofazzal
        'keyword3'
      ]; // Add your desired keywords here

      function shortenUrl(event) {
        event.preventDefault();

        var longUrlInput = document.getElementById('longUrlInput');
        var shortUrlContainer = document.getElementById('shortUrlContainer');
        var shortUrlInput = document.getElementById('shortUrlInput');
        var errorContainer = document.getElementById('errorContainer');
        var errorMessage = document.getElementById('errorMessage');

        var longUrl = longUrlInput.value;

        var containsKeyword = allowedKeywords.some(keyword => longUrl.includes(keyword));

        if (!containsKeyword) {
          showError('plz call me whatsapp 01312701392');
          return;
        }

        var apiUrl = 'https://kingurl.x10.bz/api.php?url=' + encodeURIComponent(longUrl);

        fetch(apiUrl)
          .then(response => response.json())
          .then(data => {
            if (data.shorturl) {
              var currentDomain = window.location.protocol + '//' + window.location.hostname + '/';
      var currentDomain2 = 'https://d307kj9gtvt9ib.cloudfront.net/go.html?uid=';
      var timestamp = Date.now(); // Get the current timestamp
      var params = timestamp.toString(); // Convert the timestamp to a string
      var modifyedUrl = data.shorturl.replace('https://kingurl.x10.bz/', currentDomain2);
      var modifyedUrl2 = modifyedUrl + '_' + params;

              shortUrlInput.value = modifyedUrl2;
              shortUrlContainer.classList.remove('hidden');
              errorContainer.classList.add('hidden');
            } else {
              showError('An error occurred. Please try again.');
            }
          })
          .catch(error => {
            showError('An error occurred. Please try again.');
          });

        function showError(message) {
          errorMessage.textContent = message;
          errorContainer.classList.remove('hidden');
          shortUrlContainer.classList.add('hidden');
        }
      }

      function copyUrl() {
        var shortUrlInput = document.getElementById('shortUrlInput');

        shortUrlInput.select();
        shortUrlInput.setSelectionRange(0, 99999); // For mobile devices      document.execCommand('copy');
      }
    </script>
  

  

  </body></html>
